<div class="home-container">
  <div class="home-content">
    <div style="margin-top: var(--spacing-xl); margin-bottom: var(--spacing-lg);">
      <%= form_with url: root_path, method: :get, local: true, class: "search-form", style: "max-width: 600px; margin: 0 auto;" do |f| %>
        <div style="display: flex; gap: var(--spacing-sm);">
          <%= f.text_field :search, 
                value: params[:search], 
                placeholder: "Search products by name or description...", 
                class: "form-input",
                style: "flex: 1; padding: var(--spacing-md);" %>
          <%= f.submit "Search", class: "btn btn-primary", style: "white-space: nowrap;" %>
          <% if params[:search].present? %>
            <%= link_to "Clear", root_path, class: "btn btn-secondary", style: "white-space: nowrap;" %>
          <% end %>
        </div>
      <% end %>
    </div>

    <% if @products.any? %>
      <div class="products-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: var(--spacing-lg); margin-top: var(--spacing-xl);">
        <% @products.each do |product| %>
          <div class="section-card" style="cursor: pointer;" onclick="window.location='<%= public_product_path(product) %>'">
            <div class="card-icon">
              <svg width="48" height="48" fill="var(--color-primary)" viewBox="0 0 24 24">
                <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
              </svg>
            </div>
            <h3 style="margin-bottom: var(--spacing-sm);"><%= product.name %></h3>
            <p style="color: var(--color-text-secondary); margin-bottom: var(--spacing-md); font-size: 0.875rem;">
              <%= truncate(product.description, length: 100) %>
            </p>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: var(--spacing-md); padding-top: var(--spacing-md); border-top: 1px solid var(--color-border);">
              <div>
                <div style="font-size: 0.75rem; color: var(--color-text-secondary);">Open Price</div>
                <div style="font-weight: 600; color: var(--color-primary);">$<%= number_with_precision(product.open_price, precision: 2) %></div>
              </div>
              <div>
                <div style="font-size: 0.75rem; color: var(--color-text-secondary);">Bid Increment</div>
                <div style="font-weight: 600; color: var(--color-success);">$<%= number_with_precision(product.price_per_bid, precision: 2) %></div>
              </div>
            </div>
            <div style="margin-top: var(--spacing-sm); font-size: 0.75rem; color: var(--color-text-secondary);">
              By <%= product.user.name %> <%= product.user.surname %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="content-section" style="text-align: center; padding: var(--spacing-2xl); margin-top: var(--spacing-xl);">
        <div class="card-icon" style="margin: 0 auto var(--spacing-lg);">
          <svg width="64" height="64" fill="var(--color-text-secondary)" viewBox="0 0 24 24">
            <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
          </svg>
        </div>
        <% if params[:search].present? %>
          <h3 style="margin-bottom: var(--spacing-md);">No products found</h3>
          <p style="color: var(--color-text-secondary); margin-bottom: var(--spacing-xl);">
            No products match your search "<strong><%= params[:search] %></strong>"
          </p>
          <%= link_to "Clear search", root_path, class: "btn btn-primary" %>
        <% else %>
          <h3 style="margin-bottom: var(--spacing-md);">No products yet</h3>
          <p style="color: var(--color-text-secondary); margin-bottom: var(--spacing-xl);">
            Be the first to register a product!
          </p>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

