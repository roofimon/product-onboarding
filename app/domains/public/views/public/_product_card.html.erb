<div class="product-card" id="<%= dom_id(product, :card) %>" data-testid="product-card" data-product-id="<%= product.id %>" onclick="window.location='<%= public_product_path(product) %>'">
  <% fallback_image = "https://picsum.photos/seed/#{product.id}-#{product.name.parameterize}/600/400" %>
  <% product_image = image_urls[product.name] || fallback_image %>
  <div class="product-image" id="<%= dom_id(product, :image) %>" data-testid="product-image">
    <% if product_image.present? %>
      <img src="<%= product_image %>" alt="<%= product.name %> image" loading="lazy" id="<%= dom_id(product, :image_tag) %>" data-testid="product-image-tag">
    <% else %>
      <div class="product-image-placeholder" id="<%= dom_id(product, :image_placeholder) %>" data-testid="product-image-placeholder">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="9" y1="3" x2="9" y2="21"></line>
          <line x1="3" y1="9" x2="21" y2="9"></line>
        </svg>
      </div>
    <% end %>
  </div>
  <div class="product-info" id="<%= dom_id(product, :info) %>" data-testid="product-info">
    <h3 class="product-name" id="<%= dom_id(product, :name) %>" data-testid="product-name"><%= product.name %></h3>
    <p class="product-description" id="<%= dom_id(product, :description) %>" data-testid="product-description"><%= truncate(product.description, length: 80) %></p>
    <div class="product-seller" id="<%= dom_id(product, :seller) %>" data-testid="product-seller">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
      <span id="<%= dom_id(product, :seller_name) %>" data-testid="product-seller-name"><%= product.user.name %> <%= product.user.surname %></span>
    </div>
    <div class="product-pricing" id="<%= dom_id(product, :pricing) %>" data-testid="product-pricing">
      <div class="price-main" id="<%= dom_id(product, :price_main) %>" data-testid="product-price-main">
        <span class="price-label" id="<%= dom_id(product, :price_label) %>" data-testid="product-price-label">Starting Price</span>
        <span class="price-value" id="<%= dom_id(product, :price_value) %>" data-testid="product-price-value">$<%= number_with_precision(product.open_price, precision: 2) %></span>
      </div>
      <div class="price-bid" id="<%= dom_id(product, :price_bid) %>" data-testid="product-price-bid">
        <span class="bid-label" id="<%= dom_id(product, :bid_label) %>" data-testid="product-bid-label">Bid Increment</span>
        <span class="bid-value" id="<%= dom_id(product, :bid_value) %>" data-testid="product-bid-value">+$<%= number_with_precision(product.price_per_bid, precision: 2) %></span>
      </div>
    </div>
    <div class="product-action" id="<%= dom_id(product, :action) %>" data-testid="product-action">
      <span class="view-details" id="<%= dom_id(product, :view_details) %>" data-testid="product-view-details">View Details â†’</span>
    </div>
  </div>
</div>

